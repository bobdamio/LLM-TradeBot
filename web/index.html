<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LLM-TradeBot Dashboard</title>
    <link rel="stylesheet" href="/static/style.css?v=35">
    <link
        href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;700&family=Inter:wght@400;600&display=swap"
        rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>

<body>
    <div class="container">
        <!-- Header -->
        <header class="glass-panel header">
            <div class="logo">
                <span class="icon">ğŸ¤–</span>
                <h1>LLM-TradeBot: Adversarial Decision Framework <a href="https://github.com/EthanAlgoX/LLM-TradeBot"
                        target="_blank"
                        style="color: var(--neon-blue); text-decoration: none; font-size: 0.65em;">https://github.com/EthanAlgoX/LLM-TradeBot</a>
                </h1>
            </div>
            <div class="status-indicators">
                <div class="controls">
                    <button id="btn-start" class="btn-control start" title="Start Trading">â–¶</button>
                    <button id="btn-pause" class="btn-control pause" title="Pause Trading">â¸</button>
                    <button id="btn-stop" class="btn-control stop" title="Stop System">â¹</button>
                    <button id="btn-restart" class="btn-control restart" title="Restart System">ğŸ”„</button>
                    <select id="interval-selector" class="interval-selector" title="Cycle Interval">
                        <option value="1">1 min</option>
                        <option value="3" selected>3 min</option>
                        <option value="5">5 min</option>
                    </select>
                </div>
                <div class="status-item">
                    <span class="label">MODE</span>
                    <span id="sys-mode" class="value badge">LOADING</span>
                </div>
                <div class="status-item">
                    <span class="label">CYCLE</span>
                    <span id="cycle-counter" class="value">#0</span>
                </div>
                <div class="status-item">
                    <span class="label">EQUITY</span>
                    <span id="header-equity" class="value">$0.00</span>
                </div>
            </div>
        </header>

        <!-- Main Grid -->
        <main class="dashboard-grid">

            <!-- Row 1: K-Line + Net Value -->
            <section class="row-charts">
                <!-- K-Line Chart -->
                <div class="glass-panel card kline-card">
                    <div class="chart-header">
                        <div
                            style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px;">
                            <h2 style="margin: 0;">ğŸ“‰ Real-time K-Line</h2>
                            <select id="symbol-selector"
                                style="padding: 5px 10px; margin-left: 20px; background: rgba(255,255,255,0.1); border: 1px solid rgba(255,255,255,0.2); border-radius: 4px; color: #fff; font-size: 0.9rem; cursor: pointer;">
                                <option value="BTCUSDT" selected>BTC/USDT</option>
                                <option value="ETHUSDT">ETH/USDT</option>
                                <option value="BNBUSDT">BNB/USDT</option>
                                <option value="SOLUSDT">SOL/USDT</option>
                                <option value="ADAUSDT">ADA/USDT</option>
                            </select>
                        </div>
                    </div>
                    <div class="kline-container-wrapper">
                        <div class="tradingview-widget-container">
                            <div id="tradingview_b8265"></div>
                            <script type="text/javascript" src="https://s3.tradingview.com/tv.js"></script>
                            <script type="text/javascript">
                                new TradingView.widget(
                                    {
                                        "width": "100%",
                                        "height": "100%",
                                        "symbol": "BINANCE:BTCUSDT",
                                        "interval": "1",
                                        "timezone": "Asia/Shanghai",
                                        "theme": "dark",
                                        "style": "1",
                                        "locale": "zh_CN",
                                        "toolbar_bg": "#f1f3f6",
                                        "enable_publishing": false,
                                        "hide_top_toolbar": true,
                                        "save_image": false,
                                        "container_id": "tradingview_b8265"
                                    }
                                );
                            </script>
                        </div>
                    </div>
                </div>

                <!-- Net Value -->
                <div class="glass-panel card chart-composite-card">
                    <div class="chart-header">
                        <h2>ğŸ“ˆ Net Value Curve</h2>
                        <div class="header-metrics">
                            <div class="h-metric">
                                <span class="label">Total Equity</span>
                                <span id="acc-equity" class="val">$0.00</span>
                            </div>
                            <div class="h-metric">
                                <span class="label">Wallet</span>
                                <span id="acc-wallet" class="val">$0.00</span>
                            </div>
                            <div class="h-metric">
                                <span class="label">PnL</span>
                                <span id="acc-pnl" class="val neutral">$0.00</span>
                            </div>
                        </div>
                    </div>

                    <div class="chart-container-lg">
                        <canvas id="equityChart"></canvas>
                    </div>
                </div>
            </section>

            <!-- Row 2: Decisions + Trade History -->
            <section class="row-tables">
                <!-- Decisions -->
                <div class="glass-panel card decision-table-card">
                    <div
                        style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px;">
                        <h2 style="margin: 0;">ğŸ“‹ Recent Decisions</h2>
                        <div id="position-info"
                            style="font-size: 0.85rem; color: #a0aec0; display: flex; gap: 20px; align-items: center;">
                            <span id="position-count" style="color: #e0e6ed;">ğŸ“Š Positions: 0</span>
                            <div id="position-details" style="display: flex; gap: 15px;">
                                <!-- Dynamic position details will be inserted here -->
                            </div>
                            <span id="position-pnl" class="val neutral">Total PnL: $0.00</span>
                        </div>
                    </div>
                    <div class="table-container">
                        <table id="decision-table">
                            <thead>
                                <tr>
                                    <th title="å†³ç­–ç”Ÿæˆæ—¶é—´">Time</th>
                                    <th title="å¾ªç¯æ¬¡æ•°">Cycle</th>
                                    <th title="äº¤æ˜“å¯¹">Symbol</th>
                                    <th title="æœ€ç»ˆå†³ç­–åŠ¨ä½œ (LONG/SHORT/HOLD/WAIT)">Result</th>
                                    <th title="ä¿¡å¿ƒåº¦ (0-100%)">Conf</th>
                                    <th title="å†³ç­–åŸå› è¯¦ç»†è¯´æ˜ (æ‚¬åœæŸ¥çœ‹å®Œæ•´)">Reason</th>
                                    <th title="Strategist ç»¼åˆè¯„åˆ† (-100~+100)">Strat</th>
                                    <th title="1å°æ—¶è¶‹åŠ¿ä¿¡å· (TrendSubAgent)">1h-T</th>
                                    <th title="1å°æ—¶éœ‡è¡ä¿¡å· (OscillatorSubAgent)">1h-O</th>
                                    <th title="15åˆ†é’Ÿå‘¨æœŸä¿¡å· (è¶‹åŠ¿T + éœ‡è¡O)">15m</th>
                                    <th title="5åˆ†é’Ÿå‘¨æœŸä¿¡å· (è¶‹åŠ¿T + éœ‡è¡O)">5m</th>
                                    <th title="æƒ…ç»ªä¿¡å· (èµ„é‡‘æµå‘ + èµ„é‡‘è´¹ç‡)">Sent</th>
                                    <th title="é£é™©ç­‰çº§ (SAFE/WARNING/DANGER)">Risk</th>
                                    <th title="Guardian å®¡æ ¸ç»“æœ (âœ…é€šè¿‡ / â›”æ‹¦æˆª)">Guard</th>
                                    <th title="ä»·æ ¼ç²¾ç¡®ç™¾åˆ†ä½ (0-100%, å½“å‰ä»·åœ¨å†å²åŒºé—´çš„ä½ç½®)">Pos%</th>
                                    <th title="å¤šå‘¨æœŸå¯¹é½çŠ¶æ€ (âœ…ä¸€è‡´ / â–åˆ†æ­§)">Aligned</th>
                                    <th title="å¸‚åœºçŠ¶æ€ (TREND_UP/TREND_DOWN/CHOPPY)">Regime</th>
                                    <th title="ä»·æ ¼ä½ç½® (HIGH/MIDDLE/LOW)">Position</th>
                                </tr>
                            </thead>
                            <tbody>
                                <!-- JS Populated -->
                            </tbody>
                        </table>
                    </div>
                </div>

                <!-- Trade History -->
                <div class="glass-panel card trade-table-card">
                    <h2>ğŸ“œ Trade History</h2>
                    <div class="table-container">
                        <table id="trade-table">
                            <thead>
                                <tr>
                                    <th title="äº¤æ˜“è®°å½•æ—¶é—´">Time</th>
                                    <th title="äº¤æ˜“åŠ¨ä½œ (BUY/SELL/CLOSE)">Action</th>
                                    <th title="äº¤æ˜“å¯¹">Symbol</th>
                                    <th title="äº¤æ˜“ä»·æ ¼">Price</th>
                                    <th title="äº¤æ˜“æ•°é‡">Quantity</th>
                                    <th title="äº¤æ˜“æˆæœ¬ (ä»·æ ¼ Ã— æ•°é‡)">Cost</th>
                                    <th title="å¹³ä»“ä»·æ ¼">Exit Price</th>
                                    <th title="ç›ˆäºé‡‘é¢">PnL</th>
                                    <th title="å†³ç­–ä¿¡å¿ƒåº¦ (0-100%)">Confidence</th>
                                    <th title="äº¤æ˜“çŠ¶æ€ (OPEN/CLOSED/PENDING)">Status</th>
                                </tr>
                            </thead>
                            <tbody>
                                <!-- JS Populated -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </section>

            <!-- Row 3: Logs (Full Width) -->
            <section class="row-logs">
                <div class="glass-panel card compound-card">
                    <div class="compound-header">
                        <h2>ğŸ“¡ Live Log Output</h2>
                    </div>
                    <div class="compound-body split-log-view">
                        <!-- Documentation Sidebar -->
                        <div class="agent-docs-sidebar custom-scroll">
                            <div class="agent-doc-item">
                                <h4 class="agent-title oracle">ğŸ•µï¸ DataSyncAgent (The Oracle)</h4>
                                <p class="role"><strong>èŒè´£:</strong> å…¨çŸ¥å…¨èƒ½çš„æ•°æ®æºï¼Œè´Ÿè´£å¯¹é½æ—¶ç©ºã€‚</p>
                                <ul>
                                    <li><strong>å¼‚æ­¥å¹¶å‘:</strong> æ‹‰å–å¤šå‘¨æœŸ(5m/15m/1h) Kçº¿ + èµ„é‡‘è´¹ç‡ã€‚</li>
                                    <li><strong>å¿«ç…§å¯¹é½:</strong> ç¡®ä¿æ‰€æœ‰æ•°æ®å±äºåŒä¸€â€œæ—¶é—´åˆ‡ç‰‡â€ã€‚</li>
                                    <li><strong>åŒè§†å›¾:</strong> æä¾› Stable (æ”¶ç›˜) å’Œ Live (å®æ—¶) è§†å›¾ã€‚</li>
                                </ul>
                            </div>
                            <div class="agent-doc-item">
                                <h4 class="agent-title strategist">ğŸ‘¨â€ğŸ”¬ QuantAnalystAgent (The Strategist)</h4>
                                <p class="role"><strong>èŒè´£:</strong> ä¿¡å·ç”Ÿæˆå™¨ï¼Œç”Ÿæˆå¤šç»´åº¦æŠ€æœ¯ä¿¡å·ã€‚</p>
                                <ul>
                                    <li><strong>TrendSubAgent:</strong> ä¸“æ³¨è¶‹åŠ¿ (EMA/MACD)ã€‚</li>
                                    <li><strong>OscillatorSubAgent:</strong> ä¸“æ³¨åè½¬ (RSI/BB)ã€‚</li>
                                    <li><strong>SentimentSubAgent:</strong> ä¸“æ³¨æƒ…ç»ª (è´¹ç‡/æŒä»“)ã€‚</li>
                                </ul>
                            </div>
                            <div class="agent-doc-item">
                                <h4 class="agent-title critic">âš–ï¸ DecisionCoreAgent (The Critic)</h4>
                                <p class="role"><strong>èŒè´£:</strong> å†³ç­–å¤§è„‘ï¼Œå¯¹æŠ—å¼åˆ¤å®˜ã€‚</p>
                                <ul>
                                    <li><strong>ç¯å¢ƒæ„ŸçŸ¥:</strong> åŒºåˆ†è¶‹åŠ¿å¸‚/éœ‡è¡å¸‚ã€‚</li>
                                    <li><strong>ä½ç½®æ„ŸçŸ¥:</strong> è¯†åˆ«ä»·æ ¼åœ¨å†å²åŒºé—´çš„ç›¸å¯¹ä½ç½®ã€‚</li>
                                    <li><strong>åŠ æƒæŠ•ç¥¨:</strong> åŠ¨æ€è°ƒæ•´æƒé‡ï¼Œäº§å‡ºä¿¡å¿ƒåˆ†æ•°ã€‚</li>
                                </ul>
                            </div>
                            <div class="agent-doc-item">
                                <h4 class="agent-title guardian">ğŸ›¡ï¸ RiskAuditAgent (The Guardian)</h4>
                                <p class="role"><strong>èŒè´£:</strong> ç‰©ç†éš”ç¦»å®¡è®¡ï¼Œæ‹¥æœ‰ä¸€ç¥¨å¦å†³æƒã€‚</p>
                                <ul>
                                    <li><strong>R/R Check:</strong> ç›ˆäºæ¯”æ£€æŸ¥ã€‚</li>
                                    <li><strong>å›æ’¤ä¿æŠ¤:</strong> è§¦å‘æœ€å¤§å›æ’¤å¼ºåˆ¶ç†”æ–­ã€‚</li>
                                    <li><strong>è‡ªåŠ¨ä¿®æ­£:</strong> å¼ºåˆ¶é™ä½ä¸åˆç†çš„é‡ä»“å»ºè®®ã€‚</li>
                                </ul>
                            </div>
                        </div>

                        <!-- Logs Terminal -->
                        <div id="logs-container" class="logs-scroll custom-scroll">
                            <!-- JS Populated -->
                        </div>
                    </div>
                </div>
            </section>

        </main>
        </main>
    </div>
    <script src="/static/app.js"></script>
</body>

</html>